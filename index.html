<!DOCTYPE html>
<html lang="ru"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>–°–ï–ö–£–ù–î–û–ú–Ü–†</title><link href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap" rel="stylesheet"><style>*{box-sizing:border-box}body{margin:0;padding:20px;font-family:'Roboto',sans-serif;background:linear-gradient(135deg,#1f1f1f,#3c3c3c);color:white;text-align:center}.card{background-color:#2a2a2a;border-radius:20px;padding:20px;box-shadow:0 8px 30px rgba(0,0,0,.5);max-width:400px;margin:40px auto}.icon-big{font-size:8em;margin-bottom:10px}.lane-display{margin-bottom:10px}.lane-number{font-size:5em;font-weight:bold;color:#00FFAA}.lane-text{font-size:.8em;opacity:.9;color:#00FFAA;margin-top:-10px}#status-indicator{font-size:1em;font-weight:bold;margin-top:10px;margin-bottom:20px}#status-indicator.online{color:#0f0}#status-indicator.offline{color:#F33}#password-display{font-size:3em;letter-spacing:10px;margin-bottom:20px}.keypad{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;max-width:260px;margin:auto}.keypad button{font-size:2.2em;padding:10px 0;border:none;border-radius:10px;background-color:#444;color:white;transition:.3s;cursor:pointer}.keypad button:active{transform:scale(.95)}#display{margin:30px 0 0;font-weight:700;user-select:none;font-size:clamp(2.8rem,7.5vw,4.8rem);color:white}.control-buttons{display:flex;justify-content:space-between;gap:10px}button.control{padding:20px;width:100%;max-width:120px;border:none;border-radius:10px;background-color:#555;transition:.3s ease;flex:1;display:flex;justify-content:center;align-items:center}button.control svg,button.control span{width:36px;height:36px}button.control:hover:not(:disabled){box-shadow:0 4px 12px rgba(0,0,0,.4)}button.control:disabled{opacity:.5;cursor:default}#start{background-color:#4CAF50}#stop{background-color:#F44336}#send{background-color:#2196F3}#send.ok{background-color:#777!important}#auth-error{margin-top:10px;color:red;height:1.2em}#timer-screen{display:none}</style></head><body><div id="auth-screen" class="card"><div class="icon-big">‚è±</div><div id="password-display">____</div><div class="keypad"><button>1</button><button>2</button><button>3</button><button>4</button><button>5</button><button>6</button><button>7</button><button>8</button><button>9</button><button id="clear">‚å´</button><button>0</button><button id="enter">OK</button></div><div id="auth-error"></div></div><div id="timer-screen" class="card"><div class="icon-big">‚è±</div><div class="lane-display"><div class="lane-number" id="lane-number">?</div><div class="lane-text">–î–æ—Ä–æ–∂–∫–∞</div></div><div id="display">0:00.000</div><div id="status-indicator" class="offline">Offline</div><div class="control-buttons"><button id="start" class="control" aria-label="–°—Ç–∞—Ä—Ç"><svg viewBox="0 0 24 24"><polygon points="5,3 19,12 5,21" fill="white"/></svg></button><button id="stop" class="control" disabled aria-label="–°—Ç–æ–ø"><svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" fill="white"/><rect x="14" y="4" width="4" height="16" fill="white"/></svg></button><button id="send" class="control" disabled aria-label="–û—Ç–ø—Ä–∞–≤–∏—Ç—å"><svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12" stroke="white" stroke-width="3" fill="none"/></svg></button></div></div><script>const passwords={"1101":"1","2202":"2","3303":"3","4404":"4"};let password="",selectedLane=null,startTime=0,elapsedTime=0,timerInterval=null,hasStoppedOnce=false;const passwordDisplay=document.getElementById("password-display"),authError=document.getElementById("auth-error"),authScreen=document.getElementById("auth-screen"),timerScreen=document.getElementById("timer-screen"),laneNumber=document.getElementById("lane-number"),display=document.getElementById("display"),startBtn=document.getElementById("start"),stopBtn=document.getElementById("stop"),sendBtn=document.getElementById("send"),status=document.getElementById("status-indicator");function updateOnlineStatus(){if(navigator.onLine){sendBtn.disabled=!hasStoppedOnce,sendBtn.innerHTML=`<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12" stroke="white" stroke-width="3" fill="none"/></svg>`,status.textContent="Online",status.className="online"}else sendBtn.disabled=!0,sendBtn.innerHTML=`<span style="font-size: 1.6em;">üö´</span>`,status.textContent="Offline",status.className="offline"}window.addEventListener("online",updateOnlineStatus),window.addEventListener("offline",updateOnlineStatus),updateOnlineStatus(),document.querySelectorAll(".keypad button").forEach(btn=>{btn.onclick=()=>{const val=btn.textContent;"‚å´"===val?password=password.slice(0,-1):"OK"===val?passwords[password]?(selectedLane=passwords[password],laneNumber.textContent=selectedLane,authScreen.style.display="none",timerScreen.style.display="block",authError.textContent=""):(authError.textContent="‚ùå –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å!!!",password=""):password.length<4&&(password+=val),passwordDisplay.textContent=password.padEnd(4,"_")}});function formatTime(e){const t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3),o=e%1e3;return`${t}:${n.toString().padStart(2,"0")}.${o.toString().padStart(3,"0")}`}function resetSendButton(){sendBtn.disabled=!0,sendBtn.classList.remove("ok"),sendBtn.innerHTML=`<svg viewBox="0 0 24 24"><polyline points="20 6 9 17 4 12" stroke="white" stroke-width="3" fill="none"/></svg>`}startBtn.onclick=()=>{startTime=Date.now()-elapsedTime,timerInterval=setInterval(()=>{elapsedTime=Date.now()-startTime,display.textContent=formatTime(elapsedTime)},10),startBtn.disabled=!0,stopBtn.disabled=!1,stopBtn.innerHTML=`<svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" fill="white"/><rect x="14" y="4" width="4" height="16" fill="white"/></svg>`,hasStoppedOnce=!1,resetSendButton(),updateOnlineStatus()},stopBtn.onclick=()=>{hasStoppedOnce?(clearInterval(timerInterval),elapsedTime=0,display.textContent="0:00.000",stopBtn.disabled=!0,sendBtn.disabled=!0,stopBtn.innerHTML=`<svg viewBox="0 0 24 24"><rect x="6" y="4" width="4" height="16" fill="white"/><rect x="14" y="4" width="4" height="16" fill="white"/></svg>`,startBtn.disabled=!1,hasStoppedOnce=!1,resetSendButton(),updateOnlineStatus()):(clearInterval(timerInterval),hasStoppedOnce=!0,stopBtn.innerHTML=`<span style="font-size: 2.6em; color: white;">‚Ü∫</span>`,sendBtn.disabled=!navigator.onLine,startBtn.disabled=!1,updateOnlineStatus())},sendBtn.onclick=()=>{if(sendBtn.classList.contains("ok"))return;if(!navigator.onLine)return void alert("–ù–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞! –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.");const e={lane:selectedLane,time:display.textContent,timestamp:new Date().toISOString()};fetch("https://script.google.com/macros/s/AKfycbz3-dRGg32TpEN811G7t00DarvQL8i2UBYe0DfXQRgU9XrpIKahNfXCxpmoN_SneAfIbg/exec",{method:"POST",headers:{"Content-Type":"application/json"},mode:"no-cors",body:JSON.stringify(e)}),sendBtn.classList.add("ok"),sendBtn.disabled=!0,stopBtn.disabled=!0,startBtn.disabled=!1,clearInterval(timerInterval),elapsedTime=0,display.textContent="0:00.000",updateOnlineStatus()};</script></body></html>
